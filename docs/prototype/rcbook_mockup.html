<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rcbook UI Prototype (Roo Code Style)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        vscode: {
                            bg: '#1e1e1e',
                            sidebar: '#252526',
                            header: '#3c3c3c',
                            hover: '#2a2d2e',
                            selection: '#37373d',
                            blue: '#0e639c',
                            text: '#cccccc',
                            textHighlight: '#ffffff',
                            border: '#454545',
                            inputBg: '#3c3c3c',
                            inputBorder: '#3c3c3c',
                            green: '#4ec9b0', // Roo Code often uses green for success/additions
                            orange: '#ce9178',
                            purple: '#673ab7', // Roo Code vibe
                            button: '#0e639c',
                            buttonHover: '#1177bb',
                            danger: '#f14c4c'
                        },
                        roo: {
                            primary: '#8b5cf6', // Violet-500ish
                            secondary: '#10b981', // Emerald-500ish
                            bg: '#18181b' // Slightly darker for contrast
                        }
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                        mono: ['Menlo', 'Monaco', 'Courier New', 'monospace']
                    },
                    fontSize: {
                        'xxs': '0.65rem'
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #1e1e1e; color: #cccccc; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        /* Custom Scrollbar to match VS Code */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 5px;
            border: 2px solid #252526; /* Matches sidebar bg */
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4f4f4f;
        }
    </style>
</head>
<body class="flex h-screen text-sm overflow-hidden select-none font-sans">

    <!-- [MOCK] Main Editor Area (Context) -->
    <div class="flex-1 flex flex-col bg-[#1e1e1e] relative opacity-40 pointer-events-none border-r border-vscode-border">
        <!-- Tab Bar -->
        <div class="h-9 bg-[#2d2d2d] flex items-center px-4 border-b border-vscode-border overflow-hidden">
            <div class="flex items-center px-3 py-1.5 bg-[#1e1e1e] border-t border-vscode-blue text-vscode-textHighlight text-xs">
                <i class="fa-brands fa-js text-[#f7df1e] mr-2"></i> index.js
                <i class="fa-solid fa-times ml-2 hover:bg-vscode-hover rounded-sm p-0.5"></i>
            </div>
            <div class="flex items-center px-3 py-1.5 text-vscode-text text-xs opacity-70">
                <i class="fa-brands fa-css3 text-[#42a5f5] mr-2"></i> styles.css
            </div>
        </div>
        <!-- Editor Content -->
        <div class="p-4 font-mono text-sm leading-6">
            <div class="text-[#569cd6]">import</div> express <div class="text-[#569cd6]">from</div> <span class="text-[#ce9178]">'express'</span>;<br>
            <div class="text-[#569cd6]">const</div> app = express();<br>
            <br>
            <span class="text-[#6a9955]">// TODO: Implement authentication middleware</span><br>
            app.get(<span class="text-[#ce9178]">'/'</span>, (req, res) => {<br>
            &nbsp;&nbsp;res.send(<span class="text-[#ce9178]">'Hello World'</span>);<br>
            });<br>
            <br>
            app.listen(3000);
        </div>
    </div>

    <!-- [RCBOOK SIDEBAR] -->
    <div class="w-[450px] flex flex-col bg-vscode-sidebar border-l border-vscode-border shadow-2xl z-10">
        
        <!-- 1. Toolbar -->
        <div class="h-10 flex items-center justify-between px-3 bg-vscode-sidebar border-b border-vscode-border shrink-0">
            <div class="flex items-center gap-2">
                <span class="font-bold text-xs tracking-wider text-vscode-textHighlight">RCBOOK</span>
                <span class="text-[10px] bg-vscode-blue/20 text-vscode-blue px-1.5 rounded-sm">BETA</span>
            </div>
            <div class="flex space-x-1">
                <button class="w-7 h-7 flex items-center justify-center hover:bg-vscode-hover rounded text-vscode-text transition-colors" title="New Task">
                    <i class="fa-solid fa-plus"></i>
                </button>
                <button class="w-7 h-7 flex items-center justify-center hover:bg-vscode-hover rounded text-vscode-text transition-colors" title="History">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                </button>
                <button class="w-7 h-7 flex items-center justify-center hover:bg-vscode-hover rounded text-vscode-text transition-colors" title="Settings">
                    <i class="fa-solid fa-gear"></i>
                </button>
            </div>
        </div>

        <!-- 2. Main Content Area -->
        <div class="flex-1 overflow-y-auto p-2 space-y-3">
            
            <!-- [SECTION] Current Tasks Label -->
            <div class="text-xxs font-bold text-gray-500 uppercase tracking-wider px-1 mb-1 flex justify-between items-center">
                <span>Active Tasks</span>
                <span class="bg-gray-700/50 text-gray-400 px-1.5 rounded-full">2</span>
            </div>

            <!-- [CELL 1] Collapsed State -->
            <div class="group border border-vscode-border bg-[#2d2d2d] rounded-md overflow-hidden transition-all hover:border-gray-500 cursor-pointer">
                <div class="flex items-center p-2.5">
                    <div class="mr-2 text-green-500">
                        <i class="fa-solid fa-check-circle"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="text-xs font-semibold text-vscode-textHighlight truncate">Refactor User Model</h3>
                        <p class="text-[10px] text-gray-400 truncate mt-0.5">Applied changes to src/models/User.js</p>
                    </div>
                    <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button class="p-1 hover:text-white" title="Expand"><i class="fa-solid fa-chevron-down"></i></button>
                    </div>
                </div>
            </div>

            <!-- [CELL 2] Expanded State (Active) - Roo Code Style -->
            <div class="border border-vscode-blue/50 bg-[#1e1e1e] rounded-md overflow-hidden shadow-lg relative">
                <!-- Cell Header -->
                <div class="flex items-center justify-between p-2.5 bg-vscode-hover/30 border-b border-vscode-border/50">
                    <div class="flex items-center gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-vscode-blue animate-pulse"></div>
                        <span class="text-xs font-bold text-vscode-textHighlight">Implement Login API</span>
                    </div>
                    <div class="flex items-center gap-1">
                        <select class="bg-[#333] border border-vscode-border text-[10px] rounded px-1 py-0.5 text-vscode-text outline-none focus:border-vscode-blue">
                            <option>Code Mode</option>
                            <option>Architect</option>
                            <option>Debug</option>
                        </select>
                        <button class="w-6 h-6 flex items-center justify-center hover:bg-[#333] rounded text-gray-400">
                            <i class="fa-solid fa-minus"></i>
                        </button>
                        <button class="w-6 h-6 flex items-center justify-center hover:bg-red-900/50 hover:text-red-400 rounded text-gray-400">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                </div>

                <!-- Cell Body (Chat Stream) -->
                <div class="p-3 space-y-4 max-h-[500px] overflow-y-auto">
                    
                    <!-- User Message -->
                    <div class="flex gap-3">
                        <div class="mt-0.5 w-6 h-6 rounded bg-gray-600 flex items-center justify-center text-white text-[10px] shrink-0 font-bold">
                            U
                        </div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-400 mb-1">User</div>
                            <div class="text-sm text-vscode-textHighlight leading-relaxed">
                                How do I add JWT authentication to this express app?
                            </div>
                        </div>
                    </div>

                    <!-- AI Message (Roo Code Style) -->
                    <div class="flex gap-3">
                        <!-- Avatar -->
                        <div class="mt-0.5 w-6 h-6 rounded bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center text-white text-[10px] shrink-0 font-bold">
                            AI
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <div class="text-xs text-vscode-blue mb-1 font-semibold flex items-center gap-1">
                                Roo <span class="text-gray-500 font-normal">• Thinking...</span>
                            </div>

                            <!-- Thought Process (Collapsible style) -->
                            <div class="mb-3 border-l-2 border-gray-600 pl-3 py-1">
                                <div class="text-xs text-gray-400 italic">
                                    Analyzing express dependencies...<br>
                                    Checking for jsonwebtoken package...
                                </div>
                            </div>

                            <!-- Main Response -->
                            <div class="text-sm text-vscode-text mb-3 leading-relaxed">
                                I'll help you add JWT. First, we need to install the package and then create a middleware function.
                            </div>

                            <!-- Tool Call / Action Block -->
                            <div class="border border-vscode-border rounded-md bg-[#252526] overflow-hidden mb-3">
                                <div class="px-3 py-2 bg-[#2d2d2d] border-b border-vscode-border flex justify-between items-center">
                                    <span class="text-xs font-mono text-vscode-textHighlight">
                                        <i class="fa-solid fa-terminal mr-1.5 text-vscode-blue"></i>
                                        npm install jsonwebtoken
                                    </span>
                                    <button class="text-xs text-gray-400 hover:text-white">
                                        <i class="fa-regular fa-copy"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Code Block with Diff-like preview -->
                            <div class="border border-vscode-border rounded-md bg-[#1e1e1e] overflow-hidden">
                                <div class="flex items-center justify-between px-3 py-1.5 bg-[#2d2d2d] border-b border-vscode-border">
                                    <span class="text-xs text-gray-300 font-medium">src/index.js</span>
                                    <span class="text-[10px] text-vscode-green">+15 lines</span>
                                </div>
                                <div class="p-3 font-mono text-xs overflow-x-auto whitespace-pre">
<span class="text-gray-500">// ... imports</span>
<span class="text-vscode-green">+ const jwt = require('jsonwebtoken');</span>

<span class="text-vscode-green">+ function authenticateToken(req, res, next) {</span>
<span class="text-vscode-green">+   const authHeader = req.headers['authorization'];</span>
<span class="text-vscode-green">+   const token = authHeader && authHeader.split(' ')[1];</span>
<span class="text-vscode-green">+   if (token == null) return res.sendStatus(401);</span>
<span class="text-vscode-green">+   // ... verify logic</span>
<span class="text-vscode-green">+ }</span>
                                </div>
                                <!-- Actions Footer -->
                                <div class="px-3 py-2 bg-[#252526] border-t border-vscode-border flex gap-2">
                                    <button class="flex-1 bg-vscode-button hover:bg-vscode-buttonHover text-white text-xs py-1.5 rounded flex items-center justify-center gap-2 transition-colors">
                                        <i class="fa-solid fa-check"></i> Apply to File
                                    </button>
                                    <button class="px-3 py-1.5 border border-vscode-border hover:bg-[#333] rounded text-xs text-gray-300">
                                        <i class="fa-solid fa-code-compare"></i> Diff
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Input Area (Sticky Bottom of Cell) -->
                <div class="p-3 bg-[#252526] border-t border-vscode-border">
                    <div class="relative bg-vscode-inputBg border border-vscode-border focus-within:border-vscode-blue rounded-md transition-colors">
                        <textarea 
                            class="w-full bg-transparent text-sm text-vscode-text p-2 min-h-[40px] max-h-[120px] outline-none resize-none placeholder-gray-500"
                            placeholder="Ask a follow-up..."
                            rows="1"
                        ></textarea>
                        <div class="flex justify-between items-center px-2 pb-2">
                            <div class="flex gap-1">
                                <button class="p-1 hover:bg-[#444] rounded text-gray-400 text-xs" title="Attach Image"><i class="fa-regular fa-image"></i></button>
                                <button class="p-1 hover:bg-[#444] rounded text-gray-400 text-xs" title="Add Context"><i class="fa-solid fa-link"></i></button>
                            </div>
                            <button class="bg-vscode-blue hover:bg-vscode-buttonHover text-white p-1.5 rounded-sm text-xs transition-colors">
                                <i class="fa-solid fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- [SECTION] History Browser (Accordion) -->
            <div class="mt-6 pt-2 border-t border-vscode-border">
                <div class="flex items-center justify-between px-1 mb-2 cursor-pointer hover:text-white group">
                    <span class="text-xxs font-bold text-gray-500 group-hover:text-gray-300 uppercase tracking-wider">
                        <i class="fa-solid fa-chevron-down mr-1"></i> Recent Sessions
                    </span>
                    <i class="fa-solid fa-search text-gray-500 text-xs"></i>
                </div>
                
                <div class="space-y-1 pl-2">
                    <div class="flex items-center gap-2 p-1.5 hover:bg-vscode-hover rounded cursor-pointer group">
                        <i class="fa-regular fa-file-code text-gray-400 group-hover:text-vscode-textHighlight"></i>
                        <div class="flex-1 min-w-0">
                            <div class="text-xs text-vscode-text truncate">feat-login-auth.rcnb</div>
                            <div class="text-[10px] text-gray-500">2 hours ago • 3 tasks</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 p-1.5 hover:bg-vscode-hover rounded cursor-pointer group">
                        <i class="fa-regular fa-file-code text-gray-400 group-hover:text-vscode-textHighlight"></i>
                        <div class="flex-1 min-w-0">
                            <div class="text-xs text-vscode-text truncate">fix-navbar-responsive.rcnb</div>
                            <div class="text-[10px] text-gray-500">Yesterday • 1 task</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- [MOCK] Status Bar -->
    <div class="fixed bottom-0 left-0 right-0 h-6 bg-[#007acc] flex items-center px-3 text-white text-xs justify-between z-20">
        <div class="flex items-center gap-3">
            <span><i class="fa-solid fa-code-branch mr-1"></i> main</span>
            <span><i class="fa-regular fa-circle-check mr-1"></i> 0 errors</span>
        </div>
        <div class="flex items-center gap-3">
            <span>Ln 12, Col 34</span>
            <span>UTF-8</span>
            <span>JavaScript</span>
            <span><i class="fa-solid fa-bell"></i></span>
        </div>
    </div>

    <!-- [MOCK] Toast Notification (Diff Applied) -->
    <div id="toast" class="fixed bottom-10 right-10 bg-[#252526] border border-vscode-blue text-white px-4 py-3 rounded shadow-xl flex items-start gap-3 transform translate-y-20 opacity-0 transition-all duration-300 max-w-sm z-50">
        <i class="fa-solid fa-circle-info text-vscode-blue mt-0.5"></i>
        <div>
            <div id="toast-title" class="font-semibold text-xs mb-1">Opening Diff...</div>
            <div id="toast-msg" class="text-xs text-gray-300">Review changes in the new editor tab.</div>
        </div>
        <button onclick="this.parentElement.style.opacity=0" class="text-gray-400 hover:text-white"><i class="fa-solid fa-times"></i></button>
    </div>

    <script>
        // Simple Interaction Mockup
        document.addEventListener('DOMContentLoaded', () => {
            const applyBtn = document.getElementById('apply-btn');
            const codeBlock = document.getElementById('code-block');
            const reviewState = document.getElementById('review-state');
            const confirmBtn = document.getElementById('confirm-btn');
            const rejectBtn = document.getElementById('reject-btn');
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toast-title');
            const toastMsg = document.getElementById('toast-msg');
            
            function showToast(title, msg, colorClass = 'text-vscode-blue') {
                toastTitle.innerText = title;
                toastMsg.innerText = msg;
                toast.querySelector('i').className = `fa-solid fa-circle-info ${colorClass} mt-0.5`;
                
                toast.classList.remove('translate-y-20', 'opacity-0');
                setTimeout(() => {
                    toast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            }

            if(applyBtn) {
                applyBtn.addEventListener('click', () => {
                    // 1. Show Toast
                    showToast('Opening Diff View', 'Please review changes in the main editor tab.');
                    
                    // 2. Hide Code Block, Show Review State
                    codeBlock.classList.add('hidden');
                    reviewState.classList.remove('hidden');
                });
            }
            
            if(confirmBtn) {
                confirmBtn.addEventListener('click', () => {
                    showToast('Changes Confirmed', 'Code has been written to src/index.js', 'text-green-500');
                    // Reset UI for demo
                    setTimeout(() => {
                         reviewState.classList.add('hidden');
                         codeBlock.classList.remove('hidden');
                    }, 2000);
                });
            }

            if(rejectBtn) {
                rejectBtn.addEventListener('click', () => {
                    showToast('Changes Rejected', 'No changes were made.', 'text-red-500');
                    // Reset UI
                    reviewState.classList.add('hidden');
                    codeBlock.classList.remove('hidden');
                });
            }
        });
    </script>
</body>
</html>
